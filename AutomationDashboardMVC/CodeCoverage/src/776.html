<!DOCTYPE html>
<html>
  <head>
    <meta http-equiv="content-type" content="text/html; charset=utf-8" />
    <title>C:\Masterworks\MasterworksRelease\.Net\Platform\Business Layer\UserControls\NewDashboard.ascx.cs</title>
    <script type="text/javascript" src="../js/dotcover.sourceview.js"></script>
    <link rel="stylesheet" type="text/css" href="../css/dotcover.report.css" />
  </head>
  <body>
    <pre id="content" class="source-code">
using System;
using System.Collections.Generic;
using System.Globalization;
using System.IO;
using System.Runtime.Serialization.Json;
using System.Text;
using System.Web.UI;
using System.Web.UI.HtmlControls;
using System.Web.UI.WebControls;
using System.Web.UI.WebControls.WebParts;
using System.Xml;
using Aurigo.AMP3.Common;
using Aurigo.AMP3.WebPartHelper;
using Aurigo.Brix.Core.WebUiHelper;
using Aurigo.Brix.Platform.CoreUtilities.Utility;
using Aurigo.Brix.Platform.BusinessLayer.BL;
using Aurigo.Brix.Platform.BusinessLayer.DTO;
using System.Data;
using Aurigo.AMP3.ModuleManagementBL;
using Aurigo.AMP3.UserManagementBL;
using System.Web;
using Telerik.Web.UI;

namespace Aurigo.AMP3.Core.UserControls
{
    public partial class NewDashboard : UserControl
    {
        protected ModalPopupExtender PopupExtender;

        public string ParentPagePath = string.Empty;

        private DashboardDTO _currentDashboardDTO = null;
        private bool? _currentUser_IsAdministrator;
        private const int nRows = 3;
        private int currentLayoutNo = 2;

        #region PRIVATE PROPERTIES

        private BrixPageBase CurrentPage_AsBrixPageBase
        {
            get
            {
                return HttpContext.Current.Handler as BrixPageBase;
            }
        }

        private int DashboardID
        {
            get
            {
                int dashboardID = 0;

                if (!string.IsNullOrEmpty(Request.QueryString[&quot;DashboardID&quot;]) &amp;&amp; Request.QueryString[&quot;DashboardID&quot;].ToInt32_2() &gt; 0)
                    return Request.QueryString[&quot;DashboardID&quot;].ToInt32_2();

                dashboardID = GetDefaultDashboard();
                return dashboardID;
            }
        }

        private string DashboardContext
        {
            get
            {
                if (!string.IsNullOrEmpty(Request.QueryString[&quot;Context&quot;]))
                    return Request.QueryString[&quot;Context&quot;];

                return &quot;&quot;;
            }
        }

        private int InstanceID
        {
            get
            {
                if (!string.IsNullOrEmpty(Request.QueryString[&quot;InstanceID&quot;]))
                    return Request.QueryString[&quot;InstanceID&quot;].ToInt32_2();

                return 0;
            }
        }

        private int ProjectID
        {
            get
            {
                if (!string.IsNullOrEmpty(Request.QueryString[&quot;PID&quot;]))
                    return Request.QueryString[&quot;PID&quot;].ToInt32_2();

                return 0;
            }
        }

        private int LayoutID
        {
            get
            {
                if (!string.IsNullOrEmpty(Request.QueryString[&quot;Layout&quot;]))
                    return Request.QueryString[&quot;Layout&quot;].ToInt32_2();

                return 0;
            }
        }

        private string Mode
        {
            get
            {
                if (!string.IsNullOrEmpty(Request.QueryString[&quot;Mode&quot;]))
                    return Request.QueryString[&quot;Mode&quot;];

                return &quot;&quot;;
            }
        }

        private string Action
        {
            get
            {
                if (!string.IsNullOrEmpty(Request.QueryString[&quot;Action&quot;]))
                    return Request.QueryString[&quot;Action&quot;];

                return &quot;&quot;;
            }
        }

        private DashboardDTO CurrentDashoardDTO
        {
            get
            {
                if (_currentDashboardDTO == null)
                    _currentDashboardDTO = DashboardManager.Instance.GetDashboardDetails(DashboardID, CurrentUser_UserID, CurrentUser_RoleID);

                return _currentDashboardDTO;
            }
        }

        private int CurrentUser_UserID
        {
            get
            {
                return UserDetail.GetCurrentUserDetail().UID;
            }
        }

        private int CurrentUser_RoleID
        {
            get
            {
                if (ModuleManager.Instance.IsEffectivePermissionOfRoles())
                    return 0;
                else
                    return UserDetail.GetCurrentUserDetail().RID;
            }
        }

        private string ParentPageURL
        {
            get
            {
                if (ParentPagePath.Contains(&quot;?&quot;))
                    return ParentPagePath + &quot;&amp;&quot;;
                else
                    return ParentPagePath + &quot;?&quot;;
            }
        }

        private bool IsRedirected
        {
            get
            {
                bool isRedirected;
                if (bool.TryParse(Request.QueryString[&quot;Redirected&quot;], out isRedirected))
                    return isRedirected;

                return false;
            }
        }
        #endregion

        #region PROTECTED PROPERTIES
        protected bool CurrentUser_IsAdministrator
        {
            get
            {
                if (!_currentUser_IsAdministrator.HasValue)
                {
                    if (ModuleManager.Instance.IsEffectivePermissionOfRoles())
                        _currentUser_IsAdministrator = UserManager.Instance.IsUserAdministrator(CurrentUser_UserID);
                    else
                        _currentUser_IsAdministrator = CurrentUser_RoleID == Constants.USRMGMT_ADMIN_RID;
                }

                return _currentUser_IsAdministrator.Value;
            }
        }
        #endregion

        #region PAGE METHODS
        protected void Page_Init(object sender, EventArgs e)
        {
            UserDetail ud = UserDetail.GetCurrentUserDetail();
            if (ud != null)
            {
                if (!string.IsNullOrEmpty(Request[&quot;Layout&quot;]))
                    int.TryParse(Request[&quot;Layout&quot;].ToString(), out currentLayoutNo);

                if ((Mode.ToLower() == &quot;edit&quot; || Mode.ToLower() == &quot;view&quot;) &amp;&amp; CurrentDashoardDTO != null)
                    currentLayoutNo = CurrentDashoardDTO.Layout;

                if (currentLayoutNo &gt; 4 || currentLayoutNo &lt; 1)
                    currentLayoutNo = 1;


                int EnabledModes = 0;
                foreach (WebPartDisplayMode mode in WPM.SupportedDisplayModes)
                    if (mode.IsEnabled(WPM))
                        EnabledModes++;
                if (EnabledModes == 1)
                    UIHelper.FakeFormsAuthentication(ud.UserID);

                BuildZoneTableFromLayout();
            }

            PopupExtender.AddNewPopup(DashboardDetailsPanel.ClientID, lnkCreateDashboard.ClientID, btnCancelNewDashboard.ClientID, 300, 375, Header: &quot;New Dashboard&quot;, onDialogOpenScript: &quot;onNewDashboard_click()&quot;);
            PopupExtender.AddNewPopup(DashboardDetailsPanel.ClientID, btnShowDashboardPopup.ClientID, btnCancelNewDashboard.ClientID, 300, 375, Header: &quot;Edit Dashboard&quot;);
        }

        protected void Page_Load(object sender, EventArgs e)
        {
            PopulateRoles();

            if (!IsPostBack)
            {
                PopulateDashboards();
                SetDefaultDashboard();
                SetLayout();
                SetDefaultActionMode();

                if (Action.ToLower() == &quot;catalog&quot;)
                    WPM.DisplayMode = WPM.SupportedDisplayModes[&quot;Catalog&quot;];
                else if (Action.ToLower() == &quot;edit&quot;)
                    WPM.DisplayMode = WPM.SupportedDisplayModes[&quot;Edit&quot;];
                else if (Action.ToLower() == &quot;browse&quot;)
                    WPM.DisplayMode = WPM.SupportedDisplayModes[&quot;Browse&quot;];

                ShowAllNotificationMessages();
            }

            SetUIControls();

            LoadDashboardForEdit(DashboardID);
        }
        #endregion

        #region DASHBOARD CONTROLS
        protected void ddlDashBoards_SelectedIndexChanged(object sender, EventArgs e)
        {
            string redirectUrl = string.Format(&quot;{3}nt=1&amp;Context={0}&amp;InstanceID={1}&amp;Mode=View&amp;DashboardID={2}&quot;, DashboardContext, InstanceID, ddlDashBoards.SelectedValue, ParentPageURL);
            Response.Redirect(redirectUrl);
        }

        protected void lnkDeleteDashboard_Click(object sender, EventArgs e)
        {
            if (ddlDashBoards.Items.Count == 0)
            {
                ShowError(&quot;Please select a dashboard to delete.&quot;);
                return;
            }

            int selectedDashboard = ddlDashBoards.SelectedValue.ToInt32_2();

            DashboardManager.Instance.DeleteDashboard(selectedDashboard, CurrentUser_UserID);
            int dashboardID = GetDefaultDashboard();

            if (dashboardID == DashboardID &amp;&amp; ddlDashBoards.Items.Count &gt; 1)
                dashboardID = ddlDashBoards.Items[1].Value.ToInt32_2();
            else
                dashboardID = 0;

            AddNotificationMessageAfterRedirect(&quot;Success&quot;, &quot;Dashboard was deleted successfully.&quot;);

            string redirectUrl = string.Format(&quot;{3}nt=1&amp;Context={0}&amp;InstanceID={1}&amp;Mode=View&amp;DashboardID={2}&quot;, DashboardContext, InstanceID, dashboardID, ParentPageURL);

            if (dashboardID == 0)
                redirectUrl = string.Format(&quot;{2}nt=1&amp;Context={0}&amp;InstanceID={1}&amp;Mode=View&quot;, DashboardContext, InstanceID, ParentPageURL);

            Response.Redirect(redirectUrl);
        }

        protected void btnSaveDashboard_Click(object sender, EventArgs e)
        {
            try
            {
                int newDashboardID = SaveDashboardDetails();

                string redirectUrl = string.Format(&quot;{3}nt=1&amp;Context={0}&amp;InstanceID={1}&amp;Mode=View&amp;DashboardID={2}&quot;, DashboardContext, InstanceID, newDashboardID, ParentPageURL);
                Response.Redirect(redirectUrl);
            }
            catch (Exception ex)
            {
                ShowError(ex.Message);
            }
        }

        protected void btnSaveNDesignDashboard_Click(object sender, EventArgs e)
        {
            try
            {
                int newDashboardID = SaveDashboardDetails();

                int layoutID = rblDashboardLayouts.SelectedValue.ToInt32_2();

                string redirectUrl = string.Format(&quot;{4}nt=1&amp;Context={0}&amp;InstanceID={1}&amp;Mode=Edit&amp;Action=Catalog&amp;DashboardID={2}&amp;layout={3}&quot;, DashboardContext, InstanceID, newDashboardID, layoutID, ParentPageURL);
                Response.Redirect(redirectUrl);
            }
            catch (Exception ex)
            {
                ShowError(ex.Message);
            }
        }

        protected void lnkMakeDefault_Click(object sender, EventArgs e)
        {
            if (ddlDashBoards.Items.Count == 0)
            {
                ShowError(&quot;Please select a dashboard to set as default.&quot;);
                return;
            }

            int selectedDashboard = ddlDashBoards.SelectedValue.ToInt32_2();
            DashboardManager.Instance.SetDefaultDashboard(selectedDashboard, CurrentUser_UserID, DashboardContext);
            tdMakeDefault.Visible = false;
        }

        protected void ddlModes_SelectedIndexChanged(object sender, EventArgs e)
        {
            if (ddlDashBoards.Items.Count == 0)
            {
                ShowError(&quot;Please select a dashboard to edit.&quot;);
                return;
            }

            int selectedDashboard = ddlDashBoards.SelectedValue.ToInt32_2();

            if (ddlModes.SelectedValue == &quot;0&quot;)
            {
                string redirectUrl = string.Format(&quot;{3}nt=1&amp;Context={0}&amp;InstanceID={1}&amp;Mode=View&amp;Action=Browse&amp;DashboardID={2}&quot;, DashboardContext, InstanceID, selectedDashboard, ParentPageURL);
                Response.Redirect(redirectUrl);
            }
            else if (ddlModes.SelectedValue == &quot;1&quot;)
            {
                string redirectUrl = string.Format(&quot;{3}nt=1&amp;Context={0}&amp;InstanceID={1}&amp;Mode=Edit&amp;Action=Edit&amp;DashboardID={2}&quot;, DashboardContext, InstanceID, selectedDashboard, ParentPageURL);
                Response.Redirect(redirectUrl);
            }
            else if (ddlModes.SelectedValue == &quot;2&quot;)
            {
                string redirectUrl = string.Format(&quot;{3}nt=1&amp;Context={0}&amp;InstanceID={1}&amp;Mode=Edit&amp;Action=Catalog&amp;DashboardID={2}&quot;, DashboardContext, InstanceID, selectedDashboard, ParentPageURL);
                Response.Redirect(redirectUrl);
            }
        }
        #endregion

        #region MISC METHODS
        private void PopulateDashboards()
        {
            DataSet ds = DashboardManager.Instance.GetDashboards(CurrentUser_RoleID, CurrentUser_UserID, DashboardContext, InstanceID, ProjectID);

            ddlDashBoards.Items.Clear();

            if (ds != null &amp;&amp; ds.Tables.Count &gt; 0 &amp;&amp; ds.Tables[0].Rows.Count &gt; 0)
            {
                foreach (DataRow dr in ds.Tables[0].Rows)
                {
                    ListItem item = new ListItem(dr[&quot;Name&quot;].ToString(), dr[&quot;DashboardID&quot;].ToString());
                    item.Attributes[&quot;DataGroupField&quot;] = dr[&quot;GroupType&quot;].ToString();
                    ddlDashBoards.Items.Add(item);
                }
            }
        }

        private void SetDefaultDashboard()
        {
            int defaultDashboardID = DashboardID;

            if (defaultDashboardID == 0)
                defaultDashboardID = GetDefaultDashboard();

            if (defaultDashboardID != 0)
            {
                ListItem selectedDashboard = ddlDashBoards.Items.FindByValue(defaultDashboardID.ToString());
                if (selectedDashboard != null)
                {
                    ddlDashBoards.SelectedIndex = -1;
                    ddlDashBoards.SelectedValue = selectedDashboard.Value;
                }
                else
                {
                    if (!(IsRedirected &amp;&amp; DashboardContext.Equals(Constants.MODID_ENTPRSE, StringComparison.InvariantCultureIgnoreCase)))
                        UIHelper.RedirectURL(&quot;You do not have permission to view this dashboard.&quot;, Constants.URL_ENTERPRISE, null, HttpContext.Current);
                }
            }
        }

        private int GetDefaultDashboard()
        {
            int defaultDashboard = 0;

            defaultDashboard = DashboardManager.Instance.GetDefaultDashboard(CurrentUser_UserID, CurrentUser_RoleID, DashboardContext, InstanceID, ProjectID);

            if (defaultDashboard == 0 &amp;&amp; ddlDashBoards.Items.Count &gt; 0)
                defaultDashboard = ddlDashBoards.Items[0].Value.ToInt32_2();

            return defaultDashboard;
        }

        private void SetLayout()
        {
            if (LayoutID != 0)
            {
                ListItem selectedLayout = rblDashboardLayouts.Items.FindByValue(LayoutID.ToString());
                if (selectedLayout != null)
                {
                    rblDashboardLayouts.SelectedIndex = -1;
                    rblDashboardLayouts.SelectedValue = selectedLayout.Value;
                }
            }
        }

        private int SaveDashboardDetails()
        {
            if (string.IsNullOrEmpty(txtDashboardName.Text))
            {
                throw new Exception(&quot;Dashboard name cannot be empty.&quot;);
            }

            if (radAssignToRoles.Entries.Count == 0 &amp;&amp; rblDashboardFor.SelectedValue == &quot;1&quot;)
            {
                throw new Exception(&quot;Select at least one role.&quot;);
            }

            int currDashboardId = 0;
            if (hdnMode.Value.ToLower() == &quot;edit&quot;)
                currDashboardId = ddlDashBoards.SelectedValue.ToInt32_2();

            int selectedlayout = 1;
            int visibleTo = 0;

            int.TryParse(rblDashboardLayouts.SelectedValue, out selectedlayout);
            int.TryParse(rblDashboardFor.SelectedValue, out visibleTo);

            if (!ValidateDashboardName(txtDashboardName.Text, currDashboardId, visibleTo))
                throw new Exception(&quot;A dashboard with same name already exists. Please select a different name.&quot;);

            DashboardDTO dto = new DashboardDTO();

            if (hdnMode.Value.ToLower() == &quot;edit&quot;)
            {
                dto.DashboardID = ddlDashBoards.SelectedValue.ToInt32_2();
            }

            string selectedRoleIds = string.Empty;
            List&lt;int&gt; uniqueRoleIds = new List&lt;int&gt;();
            int selectedRoleId = 0;
            for (int i = 0; i &lt; radAssignToRoles.Entries.Count; i++)
            {
                if (Int32.TryParse(radAssignToRoles.Entries[i].Value, out selectedRoleId) &amp;&amp; !uniqueRoleIds.Contains(selectedRoleId))
                {
                    uniqueRoleIds.Add(selectedRoleId);
                    selectedRoleIds += radAssignToRoles.Entries[i].Value + &quot;,&quot;;
                }
            }

            dto.Name = txtDashboardName.Text;
            dto.Description = txtDashboardDescription.Text;
            dto.RoleIDs = selectedRoleIds;
            dto.Layout = selectedlayout;
            dto.IsActive = true;
            dto.CreatedBy = UserDetail.GetCurrentUserDetail().UID;
            dto.Context = DashboardContext;
            dto.DashboardType = visibleTo;
            dto.InstanceID = InstanceID;

            int newDashboardID = DashboardManager.Instance.CreateUpdateDashboard(dto);

            return newDashboardID;
        }

        private void LoadDashboardForEdit(int dashboardID)
        {
            if (CurrentDashoardDTO != null)
                hdnCurrentDashboardDetails.Value = GetDashboardDetails_InJSONFormat(CurrentDashoardDTO);

            SetUIControls();
        }

        private void SetDefaultActionMode()
        {
            if (Action.ToLower() == &quot;edit&quot;)
                ddlModes.SelectedValue = &quot;1&quot;;
            else if (Action.ToLower() == &quot;catalog&quot;)
                ddlModes.SelectedValue = &quot;2&quot;;
            else
                ddlModes.SelectedValue = &quot;0&quot;;
        }

        private void SetUIControls()
        {
            if (CurrentUser_IsAdministrator)
            {
                trVisibleTo.Visible = true;
            }
            else
            {
                trVisibleTo.Visible = false;
                rblDashboardFor.SelectedValue = &quot;0&quot;;
                trAssignToRoles.Visible = false;
                radAssignToRoles.Entries.Clear();
            }

            if (CurrentDashoardDTO != null)
            {
                if ((CurrentUser_IsAdministrator &amp;&amp; CurrentDashoardDTO.DashboardType == 1)
                    || CurrentDashoardDTO.CreatedBy == CurrentUser_UserID)
                {
                    tdModeCaption.Style.Add(&quot;display&quot;, &quot;&quot;);
                    tdModeControl.Style.Add(&quot;display&quot;, &quot;&quot;);
                    tdDeleteControl.Style.Add(&quot;display&quot;, &quot;&quot;);

                }
                else
                {
                    tdModeCaption.Style.Add(&quot;display&quot;, &quot;none&quot;);
                    tdModeControl.Style.Add(&quot;display&quot;, &quot;none&quot;);
                    tdDeleteControl.Style.Add(&quot;display&quot;, &quot;none&quot;);
                }

                if (!CurrentDashoardDTO.IsDefault)
                {
                    tdMakeDefault.Visible = true;
                }
                else
                {
                    tdMakeDefault.Visible = false;
                }

                if (CurrentDashoardDTO.DashboardType == 0)
                {
                    imgUserBasedDashboard.Visible = true;
                    imgRoleBasedDashboard.Visible = false;
                }
                else
                {
                    imgUserBasedDashboard.Visible = false;
                    imgRoleBasedDashboard.Visible = true;
                }
            }

            if (ddlDashBoards.Items.Count == 0)
            {
                tdModeCaption.Style.Add(&quot;display&quot;, &quot;none&quot;);
                tdModeControl.Style.Add(&quot;display&quot;, &quot;none&quot;);
                tdEditDashboardControl.Style.Add(&quot;display&quot;, &quot;none&quot;);
                tdDeleteControl.Style.Add(&quot;display&quot;, &quot;none&quot;);

                tdMakeDefault.Visible = false;
                imgUserBasedDashboard.Visible = false;
                imgRoleBasedDashboard.Visible = false;
            }
        }

        private void PopulateRoles()
        {
            try
            {
                Dictionary&lt;int, string&gt; roles = UserManager.Instance.GetRoles();
                int index = -1;

                foreach (var k in roles)
                {
                    if (Convert.ToString(k.Value).ToLower() == AMP3ApplicationSettings.Instance.ContractorBidderRole.ToLower())
                    {
                        index = k.Key;
                    }
                }
                if (index != -1) roles.Remove(index);
                radAssignToRoles.DataSource = roles;
                radAssignToRoles.DataValueField = &quot;Key&quot;;
                radAssignToRoles.DataTextField = &quot;Value&quot;;
                radAssignToRoles.DataBind();
            }
            catch (Exception e)
            {

            }
        }

        private bool ValidateDashboardName(string name, int dashboardId, int dashboardType)
        {
            if (DashboardManager.Instance.DashboardNameExists(name, CurrentUser_UserID, DashboardContext, dashboardId, dashboardType))
                return false;

            return true;
        }

        #endregion

        #region DASHBOARD LAYOUT METHODS

        private WebPartZone CreateWebPartZone(string ID, int width, int height, Orientation layoutOrientation)
        {
            var wpz = new WebPartZone();
            wpz.LayoutOrientation = layoutOrientation;
            SkinWebZone(wpz, width, height);
            wpz.ID = ID.Replace(&quot; &quot;, &quot;&quot;);
            wpz.HeaderText = ID;
            wpz.WebPartVerbRenderMode = WebPartVerbRenderMode.TitleBar;
            wpz.TitleBarVerbButtonType = System.Web.UI.WebControls.ButtonType.Image;

            wpz.CloseVerb.Visible = false;
            wpz.CloseVerb.ImageUrl = &quot;/Images/icn_wp_close.png&quot;;
            wpz.DeleteVerb.ImageUrl = &quot;/Images/icn_wp_delete.png&quot;;
            wpz.EditVerb.ImageUrl = &quot;/Images/icn_wp_edit.png&quot;;
            wpz.MinimizeVerb.ImageUrl = &quot;/Images/icn_wp_minimize.png&quot;;
            wpz.RestoreVerb.ImageUrl = &quot;/Images/icn_wp_restore.png&quot;;
            wpz.TitleBarVerbStyle.CssClass = &quot;webZoneTitlebarVerbStyle&quot;;
            wpz.CssClass = &quot;webZoneStyle&quot;;
            wpz.EmptyZoneText = &quot;Add a Web Part to this zone from catalog.&quot;;
            return (wpz);
        }

        private void DoZone1Layout()
        {
            HtmlTableRow htr;
            HtmlTableCell htc;

            for (int i = 0; i &lt; nRows; i++)
            {
                htr = new HtmlTableRow();
                htr.ID = &quot;ZTR&quot; + i.ToString2();

                htc = new HtmlTableCell();
                htc.Width = &quot;100%&quot;;
                htc.Height = &quot;33%&quot;;
                htc.Style.Add(&quot;vertical-align&quot;, &quot;top&quot;);
                htc.ID = &quot;ZTC&quot; + i.ToString2();

                htc.Controls.Add(CreateWebPartZone(&quot;Web Part Zone &quot; + i.ToString2(), 100, 100, Orientation.Horizontal));
                htr.Controls.Add(htc);
                ZoneTable.Rows.Add(htr);
            }
        }

        private void DoZone4Layout()
        {
            HtmlTableRow htr;
            HtmlTableCell htc;

            for (int i = 0; i &lt; nRows; i++)
            {
                if ((i % 2) == 0)
                {
                    # region Create the Single Cell with a Webpart

                    htr = new HtmlTableRow();
                    htr.ID = &quot;ZTR&quot; + i.ToString2();

                    htc = new HtmlTableCell();
                    htc.Width = &quot;100%&quot;;
                    htc.Style.Add(&quot;vertical-align&quot;, &quot;top&quot;);
                    htc.ID = &quot;ZTC&quot; + (i + (i / 2)).ToString2();
                    htc.ColSpan = 2;

                    htc.Controls.Add(CreateWebPartZone(&quot;Web Part Zone &quot; + (i + (i / 2)).ToString2(), 100, 100,
                        Orientation.Horizontal));
                    htr.Controls.Add(htc);
                    ZoneTable.Rows.Add(htr);

                    #endregion
                }
                else
                {
                    #region Create the Double Cells with a Webpart in each

                    htr = new HtmlTableRow();
                    htr.ID = &quot;ZTR&quot; + i.ToString2();

                    htc = new HtmlTableCell();
                    htc.Width = &quot;50%&quot;;
                    htc.Style.Add(&quot;vertical-align&quot;, &quot;top&quot;);
                    htc.ID = &quot;ZTC&quot; + (i + (i / 2)).ToString2();

                    htc.Controls.Add(CreateWebPartZone(&quot;Web Part Zone &quot; + (i + (i / 2)).ToString2(), 100, 100,
                        Orientation.Horizontal));
                    htr.Controls.Add(htc);
                    ZoneTable.Rows.Add(htr);

                    htc = new HtmlTableCell();
                    htc.Width = &quot;50%&quot;;
                    htc.Style.Add(&quot;vertical-align&quot;, &quot;top&quot;);
                    htc.ID = &quot;ZTC&quot; + (i + (i / 2) + 1).ToString2();

                    htc.Controls.Add(CreateWebPartZone(&quot;Web Part Zone &quot; + (i + (i / 2) + 1).ToString2(), 100, 100,
                        Orientation.Horizontal));
                    htr.Controls.Add(htc);
                    ZoneTable.Rows.Add(htr);

                    #endregion
                }
            }
        }

        private void DoZone2And3Layout(int LongCol, int ShortCol)
        {
            HtmlTableRow htr;
            HtmlTableCell htc;

            htr = new HtmlTableRow();
            htr.ID = &quot;ZTR0&quot;;

            htr.Controls.Add(new HtmlTableCell());
            htr.Controls.Add(new HtmlTableCell());
            (htr.Controls[LongCol]).ID = &quot;ZTC0&quot;;
            ((HtmlTableCell)htr.Controls[LongCol]).Width = &quot;20%&quot;;
            ((HtmlTableCell)htr.Controls[LongCol]).Height = &quot;100%&quot;;
            ((HtmlTableCell)htr.Controls[LongCol]).RowSpan = nRows;
            ((HtmlTableCell)htr.Controls[LongCol]).Style.Add(&quot;vertical-align&quot;, &quot;top&quot;);
            (htr.Controls[ShortCol]).ID = &quot;ZTC1&quot;;
            ((HtmlTableCell)htr.Controls[ShortCol]).Width = &quot;80%&quot;;
            ((HtmlTableCell)htr.Controls[ShortCol]).Style.Add(&quot;vertical-align&quot;, &quot;top&quot;);
            ((HtmlTableCell)htr.Controls[ShortCol]).Height = (100 / nRows) + &quot;%&quot;;

            htr.Controls[LongCol].Controls.Add(CreateWebPartZone(&quot;Web Part Zone 0&quot;, 100, 100, Orientation.Vertical));
            htr.Controls[ShortCol].Controls.Add(CreateWebPartZone(&quot;Web Part Zone 1&quot;, 100, 100, Orientation.Horizontal));
            ZoneTable.Rows.Add(htr);

            for (int i = 1; i &lt; nRows; i++)
            {
                htr = new HtmlTableRow();
                htr.ID = &quot;ZTR&quot; + i.ToString2();

                htc = new HtmlTableCell();
                htc.Width = &quot;80%&quot;;
                htc.Style.Add(&quot;vertical-align&quot;, &quot;top&quot;);
                htc.Height = (100 / nRows) + &quot;%&quot;;
                htc.ID = &quot;ZTC&quot; + (i + 1).ToString2();

                htc.Controls.Add(CreateWebPartZone(&quot;Web Part Zone &quot; + (i + 1).ToString2(), 100, 100,
                    Orientation.Horizontal));
                htr.Controls.Add(htc);
                ZoneTable.Rows.Add(htr);
            }
        }

        private void BuildZoneTableFromLayout()
        {
            if (currentLayoutNo == 1)
                DoZone1Layout();
            else if (currentLayoutNo == 2)
                DoZone2And3Layout(0, 1);
            else if (currentLayoutNo == 3)
                DoZone2And3Layout(1, 0);
            else if (currentLayoutNo == 4)
                DoZone4Layout();
        }

        private void SkinWebZone(WebZone wz, int width, int height)
        {
            #region StyleInitialization

            wz.CssClass = &quot;webZoneBaseStyle&quot;;
            wz.Width = Unit.Percentage(width);
            wz.Height = Unit.Percentage(height);
            wz.FooterStyle.CssClass = &quot;webZoneFooterStyle&quot;;
            wz.PartTitleStyle.CssClass = &quot;webZonePartTitleStyle&quot;;
            wz.PartChromeStyle.CssClass = &quot;webZonePartChromeStyle&quot;;
            wz.HeaderStyle.CssClass = &quot;webZoneHeaderStyle&quot;;
            wz.VerbStyle.CssClass = &quot;webZoneVerbStyle&quot;;
            wz.PartStyle.CssClass = &quot;webZonePartStyle&quot;;
            wz.EmptyZoneTextStyle.CssClass = &quot;webZoneEmptyZoneTextStyle&quot;;

            #endregion
        }
        #endregion

        #region HELPER METHODS
        private string GetDashboardDetails_InJSONFormat(DashboardDTO dto)
        {
            System.Json.JsonObject db = new System.Json.JsonObject();
            Dictionary&lt;int, string&gt; allRoles = radAssignToRoles.DataSource as Dictionary&lt;int, string&gt;;
            string roleIdsWithNames = string.Empty;

            db.Add(&quot;Name&quot;, dto.Name);
            db.Add(&quot;Description&quot;, dto.Description);
            db.Add(&quot;DashboardType&quot;, dto.DashboardType);
            db.Add(&quot;Layout&quot;, dto.Layout);

            System.Json.JsonArray rolesArray = new System.Json.JsonArray();
            dto.RoleIDs.Split(&quot;,&quot;.ToCharArray(), StringSplitOptions.RemoveEmptyEntries).ForEach(item =&gt;
            {
                if (allRoles.ContainsKey(item.ToInt32_2()))
                {
                    System.Json.JsonObject jsonRole = new System.Json.JsonObject();

                    jsonRole.Add(&quot;RoleId&quot;, item);
                    jsonRole.Add(&quot;RoleName&quot;, allRoles[item.ToInt32_2()]);

                    rolesArray.Add(jsonRole);
                }
            });

            db.Add(&quot;Roles&quot;, rolesArray);
            return db.ToString();
        }
        private void RegisterStartupScript(string script)
        {
            Page.ClientScript.RegisterStartupScript(GetType(), Guid.NewGuid().ToString(), script, true);
        }

        private void ShowError(string message)
        {
            string script = string.Format(&quot;ShowError(&#39;{0}&#39;);&quot;, UIHelper.JavascriptEncode(message));
            RegisterStartupScript(script);

        }

        private void ShowSuccess(string message)
        {
            string script = string.Format(&quot;ShowSuccess(&#39;{0}&#39;);&quot;, UIHelper.JavascriptEncode(message));
            RegisterStartupScript(script);
        }

        private void AddNotificationMessageAfterRedirect(string messageType, string message)
        {
            List&lt;Tuple&lt;string, string&gt;&gt; messages = (List&lt;Tuple&lt;string, string&gt;&gt;)Session[&quot;UserNotificationMessage&quot;];

            if (messages == null)
                messages = new List&lt;Tuple&lt;string, string&gt;&gt;();

            messages.Add(new Tuple&lt;string, string&gt;(messageType, message));

            Session[&quot;UserNotificationMessage&quot;] = messages;
        }

        private void ShowAllNotificationMessages()
        {
            List&lt;Tuple&lt;string, string&gt;&gt; messages = (List&lt;Tuple&lt;string, string&gt;&gt;)Session[&quot;UserNotificationMessage&quot;];

            if (messages == null)
                return;

            foreach (Tuple&lt;string, string&gt; message in messages)
            {
                switch (message.Item1.ToLower())
                {
                    case &quot;success&quot;:
                        {
                            ShowSuccess(message.Item2);
                            break;
                        }
                    case &quot;error&quot;:
                        {
                            ShowError(message.Item2);
                            break;
                        }
                }
            }

            Session[&quot;UserNotificationMessage&quot;] = null;
        }
        #endregion

        #region UNUSED METHODS
        protected void rblUserScope_SelectedIndexChanged(object sender, EventArgs e)
        {
        }

        protected void WPM_OnWebPartAdded(object sender, WebPartEventArgs e)
        {
        }

        protected void WPM_OnWebPartDeleted(object sender, WebPartEventArgs e)
        {
        }

        protected void WPM_OnSelectedWebPartChanged(object sender, WebPartEventArgs e)
        {
        }

        protected void DisplayModeDropdown_SelectedIndexChanged(object sender, EventArgs e)
        {
            //String selectedMode = DisplayModeDropdown.SelectedValue;
            //WebPartDisplayMode mode = WPM.SupportedDisplayModes[selectedMode];
            //if (mode != null)
            //{
            //    try
            //    {
            //        WPM.DisplayMode = mode;
            //        if (selectedMode == &quot;Catalog&quot; &amp;&amp; Request.Path.Contains(&quot;Enterprise&quot;))
            //            ((ReflectionCatalogPart)CatalogZone1.FindControl(&quot;ReflectionCatalogPart1&quot;)).Title = &quot;Enterprise Widgets&quot;;
            //        else if (selectedMode == &quot;Catalog&quot; &amp;&amp; Request.Path.Contains(&quot;ProjectInfo.aspx&quot;))
            //            ((ReflectionCatalogPart)CatalogZone1.FindControl(&quot;ReflectionCatalogPart1&quot;)).Title = &quot;Project Widgets&quot;;
            //    }
            //    catch
            //    {
            //    }
            //}
        }

        protected void WPM_OnDisplayModeChanged(object sender, EventArgs e)
        {

        }


        #endregion


    }
}
    </pre>
    <script type="text/javascript">
      highlightRanges([[30,9,30,53,1],[32,9,32,58,1],[35,9,35,41,1],[42,13,42,14,0],[43,17,43,68,0],[44,13,44,14,0],[50,13,50,14,1],[51,17,51,37,1],[53,17,53,133,1],[54,21,54,75,0],[56,17,56,53,1],[57,17,57,36,1],[58,13,58,14,1],[64,13,64,14,1],[65,17,65,75,1],[66,21,66,59,1],[68,17,68,27,0],[69,13,69,14,1],[75,13,75,14,1],[76,17,76,78,1],[77,21,77,74,1],[79,17,79,26,0],[80,13,80,14,1],[86,13,86,14,1],[87,17,87,71,1],[88,21,88,67,1],[90,17,90,26,1],[91,13,91,14,1],[97,13,97,14,1],[98,17,98,74,1],[99,21,99,70,0],[101,17,101,26,1],[102,13,102,14,1],[108,13,108,14,1],[109,17,109,72,1],[110,21,110,56,1],[112,17,112,27,0],[113,13,113,14,1],[119,13,119,14,1],[120,17,120,74,1],[121,21,121,58,0],[123,17,123,27,1],[124,13,124,14,1],[130,13,130,14,1],[131,17,131,50,1],[132,21,132,143,1],[134,17,134,45,1],[135,13,135,14,1],[141,13,141,14,1],[142,17,142,62,1],[143,13,143,14,1],[149,13,149,14,1],[150,17,150,75,1],[151,21,151,30,1],[153,21,153,66,0],[154,13,154,14,1],[160,13,160,14,0],[161,17,161,50,0],[162,21,162,49,0],[164,21,164,49,0],[165,13,165,14,0],[171,13,171,14,0],[173,17,173,88,0],[174,21,174,41,0],[176,17,176,30,0],[177,13,177,14,0],[185,13,185,14,1],[186,17,186,60,1],[187,17,187,18,1],[188,21,188,79,1],[189,25,189,117,1],[191,25,191,106,0],[192,17,192,18,1],[194,17,194,59,1],[195,13,195,14,1],[201,9,201,10,1],[202,13,202,63,1],[203,13,203,28,1],[204,13,204,14,1],[205,17,205,62,1],[206,21,206,85,0],[208,17,208,106,1],[209,21,209,65,1],[211,17,211,64,1],[212,21,212,41,0],[215,17,215,38,1],[216,17,216,24,1],[216,26,216,49,1],[216,50,216,52,1],[216,53,216,78,1],[217,21,217,45,1],[218,25,218,40,1],[219,17,219,39,1],[220,21,220,65,0],[222,17,222,44,1],[223,13,223,14,1],[225,13,225,213,1],[226,13,226,171,1],[227,9,227,10,1],[230,9,230,10,1],[231,13,231,29,1],[233,13,233,29,1],[234,13,234,14,1],[235,17,235,38,1],[236,17,236,39,1],[237,17,237,29,1],[238,17,238,40,1],[240,17,240,51,1],[241,21,241,76,0],[242,22,242,53,1],[243,21,243,73,0],[244,22,244,55,1],[245,21,245,75,0],[247,17,247,47,1],[248,13,248,14,1],[250,13,250,29,1],[252,13,252,47,1],[253,9,253,10,1],[258,9,258,10,0],[259,13,259,186,0],[260,13,260,44,0],[261,9,261,10,0],[264,9,264,10,0],[265,13,265,48,0],[266,13,266,14,0],[267,17,267,67,0],[268,17,268,24,0],[271,13,271,77,0],[273,13,273,94,0],[274,13,274,53,0],[276,13,276,77,0],[277,17,277,72,0],[279,17,279,33,0],[281,13,281,99,0],[283,13,283,170,0],[285,13,285,34,0],[286,17,286,138,0],[288,13,288,44,0],[289,9,289,10,0],[292,9,292,10,0],[294,13,294,14,0],[295,17,295,61,0],[297,17,297,177,0],[298,17,298,48,0],[299,13,299,14,0],[300,13,300,33,0],[301,13,301,14,0],[302,17,302,39,0],[303,13,303,14,0],[304,9,304,10,0],[307,9,307,10,0],[309,13,309,14,0],[310,17,310,61,0],[312,17,312,78,0],[314,17,314,213,0],[315,17,315,48,0],[316,13,316,14,0],[317,13,317,33,0],[318,13,318,14,0],[319,17,319,39,0],[320,13,320,14,0],[321,9,321,10,0],[324,9,324,10,0],[325,13,325,48,0],[326,13,326,14,0],[327,17,327,75,0],[328,17,328,24,0],[331,13,331,77,0],[332,13,332,116,0],[333,13,333,43,0],[334,9,334,10,0],[337,9,337,10,0],[338,13,338,48,0],[339,13,339,14,0],[340,17,340,65,0],[341,17,341,24,0],[344,13,344,77,0],[346,13,346,47,0],[347,13,347,14,0],[348,17,348,194,0],[349,17,349,48,0],[350,13,350,14,0],[351,18,351,52,0],[352,13,352,14,0],[353,17,353,192,0],[354,17,354,48,0],[355,13,355,14,0],[356,18,356,52,0],[357,13,357,14,0],[358,17,358,195,0],[359,17,359,48,0],[360,13,360,14,0],[361,9,361,10,0],[366,9,366,10,1],[367,13,367,147,1],[369,13,369,41,1],[371,13,371,82,1],[372,13,372,14,1],[373,17,373,24,1],[373,26,373,36,1],[373,37,373,39,1],[373,40,373,57,1],[374,17,374,18,1],[375,21,375,103,1],[376,21,376,84,1],[377,21,377,51,1],[378,17,378,18,1],[379,13,379,14,1],[380,9,380,10,1],[383,9,383,10,1],[384,13,384,50,1],[386,13,386,41,1],[387,17,387,60,1],[389,13,389,41,1],[390,13,390,14,1],[391,17,391,109,1],[392,17,392,47,1],[393,17,393,18,1],[394,21,394,54,1],[395,21,395,75,1],[396,17,396,18,1],[398,17,398,18,0],[399,21,399,138,0],[400,25,400,153,0],[401,17,401,18,0],[402,13,402,14,1],[403,9,403,10,1],[406,9,406,10,1],[407,13,407,38,1],[409,13,409,159,1],[411,13,411,72,1],[412,17,412,77,0],[414,13,414,37,1],[415,9,415,10,1],[418,9,418,10,1],[419,13,419,31,1],[420,13,420,14,0],[421,17,421,102,0],[422,17,422,44,0],[423,17,423,18,0],[424,21,424,60,0],[425,21,425,78,0],[426,17,426,18,0],[427,13,427,14,0],[428,9,428,10,1],[431,9,431,10,0],[432,13,432,61,0],[433,13,433,14,0],[434,17,434,72,0],[437,13,437,93,0],[438,13,438,14,0],[439,17,439,66,0],[442,13,442,37,0],[443,13,443,51,0],[444,17,444,75,0],[446,13,446,36,0],[447,13,447,31,0],[449,13,449,81,0],[450,13,450,72,0],[452,13,452,91,0],[453,17,453,115,0],[455,13,455,51,0],[457,13,457,51,0],[458,13,458,14,0],[459,17,459,75,0],[460,13,460,14,0],[462,13,462,51,0],[463,13,463,55,0],[464,13,464,36,0],[465,18,465,27,0],[465,29,465,63,0],[465,65,465,68,0],[466,13,466,14,0],[467,17,467,134,0],[468,17,468,18,0],[469,21,469,55,0],[470,21,470,80,0],[471,17,471,18,0],[472,13,472,14,0],[474,13,474,46,0],[475,13,475,60,0],[476,13,476,43,0],[477,13,477,41,0],[478,13,478,33,0],[479,13,479,67,0],[480,13,480,44,0],[481,13,481,43,0],[482,13,482,41,0],[484,13,484,87,0],[486,13,486,35,0],[487,9,487,10,0],[490,9,490,10,1],[491,13,491,44,1],[492,17,492,105,1],[494,13,494,29,1],[495,9,495,10,1],[498,9,498,10,1],[499,13,499,44,1],[500,17,500,46,0],[501,18,501,52,1],[502,17,502,46,0],[504,17,504,46,1],[505,9,505,10,1],[508,9,508,10,1],[509,13,509,45,1],[510,13,510,14,1],[511,17,511,44,1],[512,13,512,14,1],[514,13,514,14,0],[515,17,515,45,0],[516,17,516,53,0],[517,17,517,49,0],[518,17,518,50,0],[519,13,519,14,0],[521,13,521,44,1],[522,13,522,14,1],[523,17,524,75,1],[525,17,525,18,1],[526,21,526,60,1],[527,21,527,60,1],[528,21,528,62,1],[530,17,530,18,1],[532,17,532,18,0],[533,21,533,64,0],[534,21,534,64,0],[535,21,535,66,0],[536,17,536,18,0],[538,17,538,51,1],[539,17,539,18,1],[540,21,540,50,1],[541,17,541,18,1],[543,17,543,18,0],[544,21,544,51,0],[545,17,545,18,0],[547,17,547,59,1],[548,17,548,18,1],[549,21,549,58,1],[550,21,550,59,1],[551,17,551,18,1],[553,17,553,18,0],[554,21,554,59,0],[555,21,555,58,0],[556,17,556,18,0],[557,13,557,14,1],[559,13,559,48,1],[560,13,560,14,1],[561,17,561,60,1],[562,17,562,60,1],[563,17,563,69,1],[564,17,564,62,1],[566,17,566,47,1],[567,17,567,55,1],[568,17,568,55,1],[569,13,569,14,1],[570,9,570,10,1],[573,9,573,10,1],[575,13,575,14,1],[576,17,576,81,1],[577,17,577,32,1],[579,17,579,24,1],[579,26,579,31,1],[579,32,579,34,1],[579,35,579,40,1],[580,17,580,18,1],[581,21,581,128,1],[582,21,582,22,1],[583,25,583,39,1],[584,21,584,22,1],[585,17,585,18,1],[586,17,586,33,1],[586,34,586,54,1],[587,17,587,53,1],[588,17,588,57,1],[589,17,589,58,1],[590,17,590,45,1],[591,13,591,14,1],[592,13,592,32,0],[593,13,593,14,0],[595,13,595,14,0],[596,9,596,10,1],[599,9,599,10,0],[600,13,600,135,0],[601,17,601,30,0],[603,13,603,25,0],[604,9,604,10,0],[611,9,611,10,1],[612,13,612,41,1],[613,13,613,55,1],[614,13,614,45,1],[615,13,615,42,1],[616,13,616,33,1],[617,13,617,72,1],[618,13,618,85,1],[620,13,620,43,1],[621,13,621,65,1],[622,13,622,67,1],[623,13,623,63,1],[624,13,624,71,1],[625,13,625,69,1],[626,13,626,73,1],[627,13,627,43,1],[628,13,628,77,1],[629,13,629,26,1],[630,9,630,10,1],[633,9,633,10,1],[637,18,637,27,1],[637,29,637,38,1],[637,40,637,43,1],[638,13,638,14,1],[639,17,639,42,1],[640,17,640,48,1],[642,17,642,43,1],[643,17,643,36,1],[644,17,644,36,1],[645,17,645,56,1],[646,17,646,48,1],[648,17,648,121,1],[649,17,649,39,1],[650,17,650,41,1],[651,13,651,14,1],[652,9,652,10,1],[655,9,655,10,0],[659,18,659,27,0],[659,29,659,38,0],[659,40,659,43,0],[660,13,660,14,0],[661,17,661,34,0],[662,17,662,18,0],[665,21,665,46,0],[666,21,666,52,0],[668,21,668,47,0],[669,21,669,40,0],[670,21,670,60,0],[671,21,671,64,0],[672,21,672,37,0],[674,21,675,50,0],[676,21,676,43,0],[677,21,677,45,0],[680,17,680,18,0],[682,17,682,18,0],[685,21,685,46,0],[686,21,686,52,0],[688,21,688,47,0],[689,21,689,39,0],[690,21,690,60,0],[691,21,691,64,0],[693,21,694,50,0],[695,21,695,43,0],[696,21,696,45,0],[698,21,698,47,0],[699,21,699,39,0],[700,21,700,60,0],[701,21,701,68,0],[703,21,704,50,0],[705,21,705,43,0],[706,21,706,45,0],[709,17,709,18,0],[710,13,710,14,0],[711,9,711,10,0],[714,9,714,10,1],[718,13,718,38,1],[719,13,719,29,1],[721,13,721,51,1],[722,13,722,51,1],[723,13,723,49,1],[724,13,724,66,1],[725,13,725,68,1],[726,13,726,68,1],[727,13,727,87,1],[728,13,728,50,1],[729,13,729,67,1],[730,13,730,88,1],[731,13,731,82,1],[733,13,733,118,1],[734,13,734,121,1],[735,13,735,37,1],[737,18,737,27,1],[737,29,737,38,1],[737,40,737,43,1],[738,13,738,14,1],[739,17,739,42,1],[740,17,740,48,1],[742,17,742,43,1],[743,17,743,35,1],[744,17,744,56,1],[745,17,745,50,1],[746,17,746,54,1],[748,17,749,46,1],[750,17,750,39,1],[751,17,751,41,1],[752,13,752,14,1],[753,9,753,10,1],[756,9,756,10,1],[757,13,757,38,1],[758,17,758,33,1],[759,18,759,43,1],[760,17,760,41,1],[761,18,761,43,0],[762,17,762,41,0],[763,18,763,43,0],[764,17,764,33,0],[765,9,765,10,1],[768,9,768,10,1],[771,13,771,46,1],[772,13,772,47,1],[773,13,773,49,1],[774,13,774,60,1],[775,13,775,66,1],[776,13,776,68,1],[777,13,777,60,1],[778,13,778,56,1],[779,13,779,56,1],[780,13,780,74,1],[783,9,783,10,1],[788,9,788,10,1],[789,13,789,70,1],[790,13,790,103,1],[791,13,791,52,1],[793,13,793,38,1],[794,13,794,52,1],[795,13,795,56,1],[796,13,796,42,1],[798,13,798,76,1],[799,13,800,13,1],[800,13,800,14,0],[800,14,801,17,1],[801,17,801,60,0],[801,60,802,17,1],[802,17,802,18,0],[802,18,803,21,1],[803,21,803,84,0],[803,84,805,21,1],[805,21,805,50,0],[805,50,806,21,1],[806,21,806,74,0],[806,74,808,21,1],[808,21,808,46,0],[808,46,809,17,1],[809,17,809,18,0],[809,18,810,13,1],[810,13,810,14,0],[810,14,810,16,1],[799,13,810,16,1],[812,13,812,41,1],[813,13,813,34,1],[814,9,814,10,1],[816,9,816,10,0],[817,13,817,105,0],[818,9,818,10,0],[821,9,821,10,0],[822,13,822,100,0],[823,13,823,43,0],[825,9,825,10,0],[828,9,828,10,0],[829,13,829,102,0],[830,13,830,43,0],[831,9,831,10,0],[834,9,834,10,0],[835,13,835,116,0],[837,13,837,34,0],[838,17,838,62,0],[840,13,840,75,0],[842,13,842,59,0],[843,9,843,10,0],[846,9,846,10,1],[847,13,847,116,1],[849,13,849,34,1],[850,17,850,24,1],[852,13,852,20,0],[852,22,852,51,0],[852,52,852,54,0],[852,55,852,63,0],[853,13,853,14,0],[854,17,854,49,0],[857,25,857,26,0],[858,29,858,56,0],[859,29,859,35,0],[862,25,862,26,0],[863,29,863,54,0],[864,29,864,35,0],[867,13,867,14,0],[869,13,869,55,0],[870,9,870,10,1],[875,9,875,10,0],[876,9,876,10,0],[879,9,879,10,0],[880,9,880,10,0],[883,9,883,10,0],[884,9,884,10,0],[887,9,887,10,0],[888,9,888,10,0],[891,9,891,10,0],[908,9,908,10,0],[911,9,911,10,0],[913,9,913,10,0]]);
    </script>
  </body>
</html>