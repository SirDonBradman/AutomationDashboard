<!DOCTYPE html>
<html>
  <head>
    <meta http-equiv="content-type" content="text/html; charset=utf-8" />
    <title>C:\Masterworks\MasterworksRelease\.Net\Construction Vertical\Main Modules\Fund Management\BL\FundAdditionsListModel.cs</title>
    <script type="text/javascript" src="../js/dotcover.sourceview.js"></script>
    <link rel="stylesheet" type="text/css" href="../css/dotcover.report.css" />
  </head>
  <body>
    <pre id="content" class="source-code">
using Aurigo.AMP3.Common;

namespace Aurigo.Brix.Construction.FundManagement
{
    [ListModelContext(Name = FundManagementBL.FUNDADD, Table = &quot;FNDMGMTAdditions&quot;)]
    public class FundAdditionsListModel : FundManagementListModel
    {
        public override void SetUIDetails()
        {
            base.SetUIDetails();
            ModifyColumnProperties(&quot;RowNum&quot;, true, null, null, null, true);
            Header = &quot;Additional Funds List&quot;;
        }

        public BrixFilter[] GetApplyFilterLabels()
        {
            return null;
            //BrixFilter[] flr = new BrixFilter[2];
            //flr[0] = new BrixFilter();
            //flr[0].FilterType = BrixFilter.Type.Text;
            //flr[0].MaxLength = 30;
            //flr[0].Title = flr[0].Name = &quot;Name&quot;;
            //flr[1] = new BrixFilter();
            //flr[1].FilterType = BrixFilter.Type.Text;
            //flr[1].MaxLength = 100;
            //flr[1].Title = flr[1].Name = &quot;Description&quot;;
            //return flr;
        }

        public override object GetList(int pageSize, string sortOrder, string filter, ref int CurrentPage, out int count,
                                       bool isLinq)
        {
            //FundManagementDb.db.Refresh(RefreshMode.OverwriteCurrentValues, FundManagementDb.db.AccountingPeriods);
            //count = (int)Math.Ceiling(FundManagementDb.db.AccountingPeriods.Count() / Convert.ToDecimal(pageSize));

            //IQueryable&lt;FundAccountingPeriod&gt; fundAccountingPeriod = FundManagementDb.db.AccountingPeriods;
            //if (!string.IsNullOrEmpty(filter))
            //{
            //    Expression&lt;Func&lt;FundAccountingPeriod, bool&gt;&gt; predicate = PredicateBuilder.True&lt;FundAccountingPeriod&gt;();
            //    foreach (FilterDef f in FundManagementBL.FormatFilterText(filter))
            //    {
            //        switch (f.Name)
            //        {
            //            case &quot;Name&quot;:
            //                string valName = f.Value;
            //                predicate = predicate.And&lt;FundAccountingPeriod&gt;(o =&gt; o.Name.Contains(valName));
            //                break;
            //            case &quot;Description&quot;:
            //                string valDesc = f.Value;
            //                predicate = predicate.And&lt;FundAccountingPeriod&gt;(o =&gt; o.Description.Contains(valDesc));
            //                break;
            //        }
            //    }
            //    fundAccountingPeriod = fundAccountingPeriod.Where&lt;FundAccountingPeriod&gt;(predicate);
            //}
            //if (!string.IsNullOrEmpty(sortOrder))
            //{
            //    fundAccountingPeriod = fundAccountingPeriod.OrderBy&lt;FundAccountingPeriod&gt;(sortOrder);
            //}

            //fundAccountingPeriod = fundAccountingPeriod.Skip((CurrentPage - 1) * pageSize).Take(pageSize);
            //return fundAccountingPeriod.Count() == 0 ? null : fundAccountingPeriod;
            return base.GetList(pageSize, sortOrder, filter, ref CurrentPage, out count, isLinq);
        }

        public override void HandleNew()
        {
            Response.Redirect(string.Format(&quot;BrixForm.aspx?Context={0}&amp;mode=New&amp;Module={1}&quot;, FundManagementBL.FUNDADD,
                                            Constants.MODID_FNDMGMT));
        }

        public override void HandleEdit()
        {
            string ID = GetSelectedIds();
            Response.Redirect(string.Format(&quot;BrixForm.aspx?Context={0}&amp;InstanceID={1}&amp;mode=Edit&amp;Module={2}&quot;,
                                            FundManagementBL.FUNDADD, ID, Constants.MODID_FNDMGMT));
        }

        public override void HandleView()
        {
            string ID = GetSelectedIds();
            Response.Redirect(string.Format(&quot;BrixForm.aspx?Context={0}&amp;InstanceID={1}&amp;mode=View&amp;Module={2}&quot;,
                                            FundManagementBL.FUNDADD, ID, Constants.MODID_FNDMGMT));
        }

        public override int HandleDelete()
        {
            //int returnValue = 0;
            //string ID = GetSelectedIds();
            //if (!string.IsNullOrEmpty(ID))
            //{
            //    string[] ids = ID.Split(&#39;,&#39;);
            //    foreach (string id in ids)
            //    {
            //        if (FundManagementDb.db.AccountingPeriods.Any&lt;FundAccountingPeriod&gt;(o =&gt; o.ID.ToString() == id))
            //            FundManagementDb.db.AccountingPeriods.DeleteOnSubmit(FundManagementDb.db.AccountingPeriods.First&lt;FundAccountingPeriod&gt;(o =&gt; o.ID.ToString() == id));
            //    }
            //    try
            //    {
            //        FundManagementDb.db.SubmitChanges();
            //    }
            //    finally
            //    {
            //        FundManagementDb.db.Refresh(RefreshMode.OverwriteCurrentValues, FundManagementDb.db.AccountingPeriods);
            //    }
            //}
            //return returnValue;
            return base.HandleDelete();
        }
    }
}
    </pre>
    <script type="text/javascript">
      highlightRanges([[9,9,9,10,0],[10,13,10,33,0],[11,13,11,76,0],[12,13,12,46,0],[13,9,13,10,0],[16,9,16,10,0],[17,13,17,25,0],[28,9,28,10,0],[32,9,32,10,0],[63,13,63,98,0],[64,9,64,10,0],[67,9,67,10,0],[68,13,69,71,0],[70,9,70,10,0],[73,9,73,10,0],[74,13,74,42,0],[75,13,76,101,0],[77,9,77,10,0],[80,9,80,10,0],[81,13,81,42,0],[82,13,83,101,0],[84,9,84,10,0],[87,9,87,10,0],[108,13,108,40,0],[109,9,109,10,0]]);
    </script>
  </body>
</html>