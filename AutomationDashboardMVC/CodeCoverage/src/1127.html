<!DOCTYPE html>
<html>
  <head>
    <meta http-equiv="content-type" content="text/html; charset=utf-8" />
    <title>C:\Masterworks\MasterworksRelease\.Net\Platform\Business Layer\ConcreteModels\DocumentManagement\TransmittalsListManagerModel.cs</title>
    <script type="text/javascript" src="../js/dotcover.sourceview.js"></script>
    <link rel="stylesheet" type="text/css" href="../css/dotcover.report.css" />
  </head>
  <body>
    <pre id="content" class="source-code">
using System.Collections.Generic;
using System.Web;
using System.Web.UI;
using Aurigo.AMP3.Core.AbstractModels;
using Aurigo.AMP3.Core.UserControls;
using Aurigo.Brix.Platform.BusinessLayer.AbstractModels;

namespace Aurigo.Brix.Platform.BusinessLayer.ConcreteModels.DocumentManagement
{
    public class TransmittalsListManagerModel : XMLListManagerModel
    {
        public override void AddItemsToMenuGroups(List&lt;AMP3.Core.UserControls.MenuGroup&gt; menuGroups)
        {
            base.AddItemsToMenuGroups(menuGroups);
            MenuGroup generalGroup = menuGroups.Find(mg =&gt; mg.Title == &quot;General&quot;);
            if (generalGroup != null)
            {
                LargeButton btnNew = (LargeButton)generalGroup.Menus.Find(m =&gt; m.ID == &quot;lnkNew&quot;);
                generalGroup.Menus.Remove(btnNew);
                MenuButton btnNewMenu = new MenuButton(&quot;lnkNew&quot;, &quot;New&quot;, &quot;Icn_New.png&quot;);

                btnNewMenu.AddSubMenu(new TextIcon(&quot;lnkNewIn&quot;, &quot;In&quot;, &quot;Icn_New.png&quot;, showRedirectConfirmMessage: true));
                btnNewMenu.AddSubMenu(new TextIcon(&quot;lnkNewOut&quot;, &quot;Out&quot;, &quot;Icn_New.png&quot;, showRedirectConfirmMessage: true));

                generalGroup.Menus.Add(btnNewMenu);
            }
        }

        public override void HandleMenuItem(string eventString, string selectedIds, ListModel model, XmlFormArgs e)
        {
            Page page = (HttpContext.Current.CurrentHandler as Page);
            if (eventString == &quot;In&quot;)
            {
                string url =
                    string.Format(&quot;~/Common/BrixForm.aspx?Context=&quot; + HttpContext.Current.Request[&quot;xContext&quot;] + &quot;&amp;PID=&quot; +
                                  HttpContext.Current.Request[&quot;PID&quot;] + &quot;&amp;ParentID=&quot; +
                                  HttpContext.Current.Request[&quot;ParentID&quot;] + &quot;&amp;Mode=New&amp;TID=1&quot;);
                page.Response.Redirect(url, true);
            }
            else if (eventString == &quot;Out&quot;)
            {
                string url =
                    string.Format(&quot;~/Common/BrixForm.aspx?Context=&quot; + HttpContext.Current.Request[&quot;xContext&quot;] + &quot;&amp;PID=&quot; +
                                  HttpContext.Current.Request[&quot;PID&quot;] + &quot;&amp;ParentID=&quot; +
                                  HttpContext.Current.Request[&quot;ParentID&quot;] + &quot;&amp;Mode=New&amp;TID=2&quot;);
                page.Response.Redirect(url, true);
            }

            else
            {
                base.HandleMenuItem(eventString, selectedIds, model, e);
            }
        }

        public override void HandleDataFromWorkFlow(ListModel model, XmlFormArgs e)
        {
            model.UpdateTree = true;
            base.HandleDataFromWorkFlow(model, e);
        }
    }
}
    </pre>
    <script type="text/javascript">
      highlightRanges([[13,9,13,10,0],[14,13,14,51,0],[15,13,15,60,0],[15,60,15,81,0],[15,81,15,83,0],[15,13,15,83,0],[16,13,16,38,0],[17,13,17,14,0],[18,17,18,80,0],[18,80,18,96,0],[18,96,18,98,0],[18,17,18,98,0],[19,17,19,51,0],[20,17,20,88,0],[22,17,22,120,0],[23,17,23,122,0],[25,17,25,52,0],[26,13,26,14,0],[27,9,27,10,0],[30,9,30,10,0],[31,13,31,70,0],[32,13,32,37,0],[33,13,33,14,0],[34,17,37,96,0],[38,17,38,51,0],[39,13,39,14,0],[40,18,40,43,0],[41,13,41,14,0],[42,17,45,96,0],[46,17,46,51,0],[47,13,47,14,0],[50,13,50,14,0],[51,17,51,73,0],[52,13,52,14,0],[53,9,53,10,0],[56,9,56,10,0],[57,13,57,37,0],[58,13,58,51,0],[59,9,59,10,0]]);
    </script>
  </body>
</html>