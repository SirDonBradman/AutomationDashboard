<!DOCTYPE html>
<html>
  <head>
    <meta http-equiv="content-type" content="text/html; charset=utf-8" />
    <title>C:\Masterworks\MasterworksRelease\.Net\Construction Vertical\Main Modules\Budget Manager\Business Layer\ConcreateModels\BudgetTemplateFormManager.cs</title>
    <script type="text/javascript" src="../js/dotcover.sourceview.js"></script>
    <link rel="stylesheet" type="text/css" href="../css/dotcover.report.css" />
  </head>
  <body>
    <pre id="content" class="source-code">
using System.Web;
using Aurigo.Brix.Platform.BusinessLayer.AbstractModels;
using Aurigo.Brix.Core.WebUiHelper;
using Aurigo.AMP3.Resources.TerminologyResources;
using Aurigo.AMP3.Core.UserControls;
using Aurigo.Brix.Platform.BusinessLayer.DataResouces;
using Aurigo.Brix.Platform.CoreUtilities.Utility;
using Aurigo.Brix.Construction.BudgetManager.BusinessLayer.BL;
using System.Web.UI.WebControls;
using Aurigo.AMP3.Core.AbstractModels;
using System.Data;
using Aurigo.AMP3.Core.BusinessLayer.BL;
using Aurigo.AMP3.Core.BusinessLayer.DTO;
using System;
using Aurigo.AMP3.Common;
using System.Globalization;
using Aurigo.AMP3.DataAccess.Core;
using Aurigo.Brix.Platform.BusinessLayer.DataAccessHelper;
using System.Web.UI;
using System.Linq;
using System.Collections.Generic;
using System.IO;
using System.Xml;

namespace Aurigo.Brix.Construction.BudgetManager.BusinessLayer.ConcreateModels
{
    public class BudgetTemplateFormManager : XMLFormManagerModel
    {
        public override void AfterSave(BrixFormModel model, XmlFormArgs e)
        {
            int? ContainerID = null;
            //int output = ItemManager.Instance.SaveContainer(ref ContainerID, &quot;Default&quot;,
            //                                            -1, model.Request[&quot;context&quot;], model.form.instanceID.ToInt32_2(),
            //                                                 &quot;Default Group&quot;, &quot;Default&quot;);
            string groupXML = GetGroupXML();
            int result = ItemManager.Instance.CUDGroupDetails(model.form.instanceID.ToInt32_2(), model.Request[&quot;context&quot;],
                                                                      &quot;Default&quot;, &quot;Default Group&quot;, 0, 0, 0, String.Empty,
                                                                      groupXML);
            base.AfterSave(model, e);
        }
        private string GetGroupXML()
        {
            string ohtXML = String.Empty;
            using (var sWr = new StringWriter(CultureInfo.CurrentCulture))
            {
                using (var xWr = new XmlTextWriter(sWr))
                {
                    xWr.WriteStartElement(&quot;GroupDetails&quot;);
                    
                    xWr.WriteEndElement();

                    xWr.Flush();

                    ohtXML = sWr.ToString2();
                }
            }
            return ohtXML;
        }
    }
}
    </pre>
    <script type="text/javascript">
      highlightRanges([[30,9,30,10,0],[31,13,31,37,0],[35,13,35,45,0],[36,13,38,81,0],[39,13,39,38,0],[40,9,40,10,0],[42,9,42,10,0],[43,13,43,42,0],[44,20,44,74,0],[45,13,45,14,0],[46,24,46,56,0],[47,17,47,18,0],[48,21,48,59,0],[50,21,50,43,0],[52,21,52,33,0],[54,21,54,46,0],[55,17,55,18,0],[56,13,56,14,0],[57,13,57,27,0],[58,9,58,10,0]]);
    </script>
  </body>
</html>