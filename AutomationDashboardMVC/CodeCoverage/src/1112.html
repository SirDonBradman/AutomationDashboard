<!DOCTYPE html>
<html>
  <head>
    <meta http-equiv="content-type" content="text/html; charset=utf-8" />
    <title>C:\Masterworks\MasterworksRelease\.Net\Platform\Business Layer\ConcreteModels\Library\CalendarXMLFormManagerModel.cs</title>
    <script type="text/javascript" src="../js/dotcover.sourceview.js"></script>
    <link rel="stylesheet" type="text/css" href="../css/dotcover.report.css" />
  </head>
  <body>
    <pre id="content" class="source-code">
using System;
using System.Web.UI.WebControls;
using Aurigo.AMP3.Core.AbstractModels;
using Aurigo.AMP3.DataAccess.Core;
using Aurigo.Brix.Platform.BusinessLayer.AbstractModels;
using Aurigo.Brix.Platform.BusinessLayer.XMLForm;
using Aurigo.Brix.Platform.CoreUtilities.Utility;
using Infragistics.WebUI.WebDataInput;
using Telerik.Web.UI;
using System.Data;
using System.Collections;
using System.Collections.Generic;

namespace Aurigo.Brix.Platform.BusinessLayer.ConcreteModels.Library
{
    public class CalendarXMLFormManagerModel : XMLFormManagerModel
    {
        public override void BeforeSave(BrixFormModel model, XmlFormArgs e)
        {
            RadGrid grid = (model.form.GetContainer(&quot;Holidays&quot;).ControlReference[0] as RadGrid);
            DataTable dt = (DataTable)grid.DataSource;
            if (dt.Rows.Count &gt; 0)
            {
                HashSet&lt;object&gt; hs = new HashSet&lt;object&gt;();
                for (int i = 0; i &lt; dt.Rows.Count; i++)
                {
                    hs.Add(dt.Rows[i][&quot;Date&quot;]);
                }

                if (hs.Count &lt; dt.Rows.Count)
                {
                    throw new Exception(&quot;This date has already been added as an exception. You cannot add it again&quot;);
                }
            }

            base.BeforeSave(model, e);
        }
    }

}
    </pre>
    <script type="text/javascript">
      highlightRanges([[19,9,19,10,0],[20,13,20,97,0],[21,13,21,55,0],[22,13,22,35,0],[23,13,23,14,0],[24,17,24,60,0],[25,22,25,31,0],[25,33,25,50,0],[25,52,25,55,0],[26,17,26,18,0],[27,21,27,48,0],[28,17,28,18,0],[30,17,30,46,0],[31,17,31,18,0],[32,21,32,118,0],[34,13,34,14,0],[36,13,36,39,0],[37,9,37,10,0]]);
    </script>
  </body>
</html>