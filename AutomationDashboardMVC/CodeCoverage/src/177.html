<!DOCTYPE html>
<html>
  <head>
    <meta http-equiv="content-type" content="text/html; charset=utf-8" />
    <title>C:\Masterworks\MasterworksRelease\.Net\Construction Vertical\Addon Modules\Contract Manager\Labour Manager\ConcreateModels\LibraryExtraListModel.cs</title>
    <script type="text/javascript" src="../js/dotcover.sourceview.js"></script>
    <link rel="stylesheet" type="text/css" href="../css/dotcover.report.css" />
  </head>
  <body>
    <pre id="content" class="source-code">
using System.Data;
using Aurigo.AMP3.Common;
using System.Web;
using Aurigo.AMP3.Core.AbstractModels;
using Infragistics.WebUI.UltraWebGrid;
using Aurigo.AMP3.Resources.TerminologyResources;
using System.Web.UI.WebControls;
using System.Collections.Generic;

namespace Aurigo.AMP3.ContractManager.LabourManagement
{
    [ListModelContext(Name = &quot;LIBREXT&quot;, Table = &quot;LIBRARYLabourExtraTypes&quot;)]
    public class LibraryExtraListModel : ListModel
    {
        public override string QueryStringName
        {
            get { return &quot;ExtraID&quot;; }
        }

        public override string ModuleId
        {
            get { return Constants.MODID_LIBRARY; }
        }

        public override DataSet GetList(int pageSize, string sortOrder, string filter, ref int CurrentPage,
                                      out int count)
        {
            sortOrder = DefaultSortColumn + &quot; DESC&quot;;
            var dicDataSourceFilter = new Dictionary&lt;string, string&gt;();
            count = 0;
            var attribs = (ListModelContextAttribute[])
                         GetType().GetCustomAttributes(typeof(ListModelContextAttribute), true);
            DataSet dsReturn = null;
            if (attribs.Length &gt; 0)
            {
                dsReturn = CoreDatabaseHelper.GetODSData(attribs[0].Table, pageSize, sortOrder, filter, filter.Trim().StartsWith(&quot;&lt;&quot;),
                                                           ref CurrentPage, out count, dicDataSourceFilter, null, null,
                                                           null);
            }
            return dsReturn;
        }

        public override void SetUIDetails()
        {
            ModifyColumnProperties(&quot;ExtraID&quot;, true, null, null, null, false);
            ModifyColumnProperties(&quot;RowNum&quot;, true, null, null, null, false);
            ModifyColumnProperties(&quot;ExtraType&quot;, false, null, null, null, false, &quot;Extra Type&quot;);
            ModifyColumnProperties(&quot;ExtraName&quot;, false, null, null, null, false, &quot;Extra Name&quot;);
            header = LocalizationManager.GetString(KeyConstants.LOC_ICA_MANPOWER).ToString() + &quot; Extras&quot;;
            HasHierarchicalGrid = true;
        }

        public override void SetHierarchicalGridProperties(DataSet sourceDataSet)
        {
            //ToDo: This code block is not converted. To be done.
            //Code commented temporarily 
            /*
            brixGrid.DisplayLayout.ViewType = ViewType.OutlookGroupBy;
            brixGrid.Columns.FromKey(&quot;ExtraType&quot;).AllowGroupBy = AllowGroupBy.Yes;
            brixGrid.Columns.FromKey(&quot;ExtraType&quot;).IsGroupByColumn = true;
            brixGrid.Columns.FromKey(&quot;ExtraType&quot;).Width = new Unit(&quot;100%&quot;);
            brixGrid.Columns.FromKey(&quot;ExtraName&quot;).Width = new Unit(&quot;100%&quot;);
            brixGrid.DisplayLayout.ColWidthDefault = new Unit(&quot;100%&quot;);
            brixGrid.PerformGroupRows();
            base.SetHierarchicalGridProperties(sourceDataSet);
            */
        }

        public override string NewURL
        {
            get
            {
                return (&quot;~/Common/BrixEditPage.aspx?Context=LIBREXT&amp;mode=New&quot;);
            }
        }

        public override void HandleNew()
        {
            Response.Redirect(NewURL);
        }

        public override void HandleEdit()
        {
            Response.Redirect(&quot;~/Common/BrixEditPage.aspx?Context=LIBREXT&amp;mode=Edit&quot; + &quot;&amp;InstanceID=&quot; + GetSelectedIds());
        }

        public override void HandleView()
        {
            Response.Redirect(&quot;~/Common/BrixEditPage.aspx?Context=LIBREXT&amp;mode=View&quot; + &quot;&amp;InstanceID=&quot; + GetSelectedIds());
        }
    }
}
    </pre>
    <script type="text/javascript">
      highlightRanges([[17,17,17,18,0],[17,19,17,36,0],[17,37,17,38,0],[22,17,22,18,0],[22,19,22,50,0],[22,51,22,52,0],[27,9,27,10,0],[28,13,28,53,0],[29,13,29,72,0],[30,13,30,23,0],[31,13,32,97,0],[33,13,33,37,0],[34,13,34,36,0],[35,13,35,14,0],[36,17,38,66,0],[39,13,39,14,0],[40,13,40,29,0],[41,9,41,10,0],[44,9,44,10,0],[45,13,45,78,0],[46,13,46,77,0],[47,13,47,95,0],[48,13,48,95,0],[49,13,49,106,0],[50,13,50,40,0],[51,9,51,10,0],[54,9,54,10,0],[67,9,67,10,0],[72,13,72,14,0],[73,17,73,80,0],[74,13,74,14,0],[78,9,78,10,0],[79,13,79,39,0],[80,9,80,10,0],[83,9,83,10,0],[84,13,84,123,0],[85,9,85,10,0],[88,9,88,10,0],[89,13,89,123,0],[90,9,90,10,0]]);
    </script>
  </body>
</html>