<!DOCTYPE html>
<html>
  <head>
    <meta http-equiv="content-type" content="text/html; charset=utf-8" />
    <title>C:\Masterworks\MasterworksRelease\.Net\Platform\Platform UI\Modules\PROJECT\GetUsersInfo.aspx.cs</title>
    <script type="text/javascript" src="../js/dotcover.sourceview.js"></script>
    <link rel="stylesheet" type="text/css" href="../css/dotcover.report.css" />
  </head>
  <body>
    <pre id="content" class="source-code">
using System;
using System.Web.UI;

namespace Aurigo.AMP3.ProjectUI
{
    public partial class GetUsersInfo : Page
    {
        protected void Page_Load(object sender, EventArgs e)
        {
            try
            {
                //TODO: Need to see where this code is being used
                if (!IsPostBack)
                {
                    //int projectID = (!String.IsNullOrEmpty(Request.QueryString[&quot;pid&quot;]))
                    //                    ? Request.QueryString[&quot;pid&quot;].ToInt32_2()
                    //                    : 0;

                    //var sbUserName = new StringBuilder();
                    //var sbUserID = new StringBuilder();
                    //var sbProjectUser = new StringBuilder();
                    //var sbUserRoles = new StringBuilder();
                    //var sbUserLoginID = new StringBuilder();
                    //var sbCompany = new StringBuilder();

                    //Dictionary&lt;int, int&gt; projectUsers = ProjectManager.Instance.GetProjectUsers(projectID);
                    //Dictionary&lt;int, string&gt; dtRoles;

                    //if (!String.IsNullOrEmpty(Request.QueryString[&quot;user&quot;]))
                    //{
                    //    DataTable dtUsers = UserManager.Instance.GetUserDetails(true);

                    //    foreach (DataRow row in dtUsers.Rows)
                    //    {
                    //        string UserName;
                    //        if (!String.IsNullOrEmpty(row[&quot;MiddleName&quot;].ToString()))
                    //            UserName = row[&quot;FirstName&quot;].ToString2() + &quot; &quot; + row[&quot;MiddleName&quot;].ToString2() + &quot; &quot; + row[&quot;LastName&quot;].ToString2();
                    //        else
                    //            UserName = row[&quot;FirstName&quot;].ToString2() + &quot; &quot; + row[&quot;LastName&quot;].ToString2();

                    //        if (UserName.ToUpper2().StartsWith2(Request.QueryString[&quot;user&quot;].ToUpper2()) ||
                    //            Request.QueryString[&quot;user&quot;].Equals(&quot;*&quot;))
                    //        {
                    //            sbUserName.Append(UserName + &quot;|&quot;);
                    //            sbUserID.Append(row[&quot;UserID&quot;].ToString2() + &quot;|&quot;);
                    //            sbUserLoginID.Append(UserManager.Instance.GetLoginId(Convert.ToInt32(row[&quot;UserID&quot;])).ToString2() + &quot;|&quot;);
                    //            sbCompany.Append(row[&quot;CompanyName&quot;].ToString2() + &quot;|&quot;);

                    //            dtRoles =
                    //                UserManager.Instance.GetAssignedRolesOfUser(
                    //                    Convert.ToInt32(row[&quot;UserID&quot;]));
                    //            if (projectUsers.ContainsKey(Convert.ToInt32(row[&quot;UserID&quot;])))
                    //            {
                    //                if (projectUsers[Convert.ToInt32(row[&quot;UserID&quot;])] != -1)
                    //                {
                    //                    sbUserRoles.Append(dtRoles[projectUsers[Convert.ToInt32(row[&quot;UserID&quot;])]] + &quot;|&quot;);
                    //                }
                    //                sbProjectUser.Append(&quot;1&quot; + &quot;|&quot;);
                    //            }
                    //            else
                    //            {
                    //                sbProjectUser.Append(&quot;0&quot; + &quot;|&quot;);
                    //                foreach (var obj in dtRoles)
                    //                {
                    //                    sbUserRoles.Append(obj.Value + &quot;|&quot;);
                    //                    break;
                    //                }
                    //            }


                    //            if (dtRoles.Count == 0)
                    //            {
                    //                sbUserRoles.Append(&quot;No Role&quot; + &quot;|&quot;);
                    //            }
                    //        }
                    //    }
                    //}
                    //else if (!String.IsNullOrEmpty(Request.QueryString[&quot;role&quot;]))
                    //{
                    //    DataTable dtusersWithRole =
                    //       UserManager.Instance.GetUsersBasedOnRole(Request.QueryString[&quot;role&quot;].ToInt32_2());

                    //    foreach (DataRow row in dtusersWithRole.Rows)
                    //    {
                    //        sbUserName.Append(row[&quot;uname&quot;].ToString2() + &quot;|&quot;);
                    //        sbUserID.Append(row[&quot;userid&quot;].ToString2() + &quot;|&quot;);
                    //        sbUserLoginID.Append(UserManager.Instance.GetLoginId(Convert.ToInt32(row[&quot;userid&quot;])).ToString2() + &quot;|&quot;);
                    //        sbCompany.Append(row[&quot;CompanyName&quot;].ToString2() + &quot;|&quot;);
                    //        dtRoles =
                    //            UserManager.Instance.GetAssignedRolesOfUser(Convert.ToInt32(row[&quot;userid&quot;]));
                    //        if (projectUsers.ContainsKey(Convert.ToInt32(row[&quot;userid&quot;])))
                    //        {
                    //            if (projectUsers[Convert.ToInt32(row[&quot;userid&quot;])] != -1)
                    //            {
                    //                sbUserRoles.Append(dtRoles[projectUsers[Convert.ToInt32(row[&quot;userid&quot;])]] + &quot;|&quot;);
                    //            }
                    //            sbProjectUser.Append(&quot;1&quot; + &quot;|&quot;);
                    //        }
                    //        else
                    //        {
                    //            sbProjectUser.Append(&quot;0&quot; + &quot;|&quot;);
                    //            sbUserRoles.Append(dtRoles[Request.QueryString[&quot;role&quot;].ToInt32_2()] + &quot;|&quot;);
                    //        }


                    //        if (dtRoles.Count == 0)
                    //        {
                    //            sbUserRoles.Append(&quot;No Role&quot; + &quot;|&quot;);
                    //        }
                    //    }
                    //}

                    //Response.Clear();
                    //Response.ContentType = &quot;text/xml&quot;;
                    //Response.Write(sbUserID.ToString2() + &quot;,&quot; + sbUserLoginID.ToString2() + &quot;,&quot; + sbUserName.ToString2() +
                    //               &quot;,&quot; + sbProjectUser.ToString2() + &quot;,&quot; + sbUserRoles.ToString2() + &quot;,;&quot; + sbCompany.ToString2());
                    //Response.End();
                }
            }
            catch (Exception ex)
            {
                Console.WriteLine(ex.Message);
            }
        }
    }
}
    </pre>
    <script type="text/javascript">
      highlightRanges([[9,9,9,10,0],[11,13,11,14,0],[13,17,13,33,0],[14,17,14,18,0],[118,17,118,18,0],[119,13,119,14,0],[120,13,120,33,0],[121,13,121,14,0],[122,17,122,47,0],[123,13,123,14,0],[124,9,124,10,0]]);
    </script>
  </body>
</html>